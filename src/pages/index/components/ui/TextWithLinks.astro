---
import ExternalLink from "./ExternalLink.astro";

interface Props {
  text: string;
}

const { text } = Astro.props as Props;
const linkRegex = /\[([^\]]+)]/g;
const segments = text.split(linkRegex).map((segment, index) => ({
  type: index % 2 === 1 ? "link" : "text",
  value: segment,
}));
---

<>
  {segments.map((segment, index) =>
    segment.type === "link" ? (
      <ExternalLink key={index} text={segment.value} />
    ) : (
      segment.value
    )
  )}
</>

